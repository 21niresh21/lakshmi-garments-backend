(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,36057,1434,94231,84429,e=>{"use strict";e.i(47167);var r=e.i(71645),t=e.i(7670),o=e.i(46051),i=e.i(19727),n=e.i(19130);let a=(0,e.i(16506).default)();e.s(["default",0,a],1434);var s=e.i(12678);function l(e){let{theme:r,name:t,props:o}=e;return r&&r.components&&r.components[t]&&r.components[t].defaultProps?(0,s.default)(r.components[t].defaultProps,o):o}e.s(["default",()=>l],94231);var c=e.i(61801);function u({props:e,name:r,defaultTheme:t,themeId:o}){let i=(0,c.default)(t);return o&&(i=i[o]||i),l({theme:i,name:r,props:e})}e.s(["default",()=>u],84429);var d=e.i(39416),h=e.i(17494);let p=(e,r,t)=>{let o=e.keys[0];if(Array.isArray(r))r.forEach((r,o)=>{t((r,t)=>{o<=e.keys.length-1&&(0===o?Object.assign(r,t):r[e.up(e.keys[o])]=t)},r)});else if(r&&"object"==typeof r){let i,n;(Object.keys(r).length>e.keys.length?e.keys:(i=e.keys,n=Object.keys(r),i.filter(e=>n.includes(e)))).forEach(i=>{if(e.keys.includes(i)){let n=r[i];void 0!==n&&t((r,t)=>{o===i?Object.assign(r,t):r[e.up(i)]=t},n)}})}else("number"==typeof r||"string"==typeof r)&&t((e,r)=>{Object.assign(e,r)},r)};function m(e){return`--Grid-${e}Spacing`}function f(e){return`--Grid-parent-${e}Spacing`}let b="--Grid-columns",y="--Grid-parent-columns",g=({theme:e,ownerState:r})=>{let t={};return p(e.breakpoints,r.size,(e,r)=>{let o={};"grow"===r&&(o={flexBasis:0,flexGrow:1,maxWidth:"100%"}),"auto"===r&&(o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),"number"==typeof r&&(o={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${r} / var(${y}) - (var(${y}) - ${r}) * (var(${f("column")}) / var(${y})))`}),e(t,o)}),t},w=({theme:e,ownerState:r})=>{let t={};return p(e.breakpoints,r.offset,(e,r)=>{let o={};"auto"===r&&(o={marginLeft:"auto"}),"number"==typeof r&&(o={marginLeft:0===r?"0px":`calc(100% * ${r} / var(${y}) + var(${f("column")}) * ${r} / var(${y}))`}),e(t,o)}),t},j=({theme:e,ownerState:r})=>{if(!r.container)return{};let t={[b]:12};return p(e.breakpoints,r.columns,(e,r)=>{let o=r??12;e(t,{[b]:o,"> *":{[y]:o}})}),t},x=({theme:e,ownerState:r})=>{if(!r.container)return{};let t={};return p(e.breakpoints,r.rowSpacing,(r,o)=>{let i="string"==typeof o?o:e.spacing?.(o);r(t,{[m("row")]:i,"> *":{[f("row")]:i}})}),t},k=({theme:e,ownerState:r})=>{if(!r.container)return{};let t={};return p(e.breakpoints,r.columnSpacing,(r,o)=>{let i="string"==typeof o?o:e.spacing?.(o);r(t,{[m("column")]:i,"> *":{[f("column")]:i}})}),t},v=({theme:e,ownerState:r})=>{if(!r.container)return{};let t={};return p(e.breakpoints,r.direction,(e,r)=>{e(t,{flexDirection:r})}),t},C=({ownerState:e})=>({minWidth:0,boxSizing:"border-box",...e.container&&{display:"flex",flexWrap:"wrap",...e.wrap&&"wrap"!==e.wrap&&{flexWrap:e.wrap},gap:`var(${m("row")}) var(${m("column")})`}});var S=e.i(43476);let E=(0,h.default)(),T=a("div",{name:"MuiGrid",slot:"Root"});function G(e){return u({props:e,name:"MuiGrid",defaultTheme:E})}var $=e.i(40799),N=e.i(94425),D=e.i(54469);let A=function(e={}){let{createStyledComponent:a=T,useThemeProps:s=G,useTheme:l=c.default,componentName:u="MuiGrid"}=e;function h(e,r,t=()=>!0){let o={};return null===e||(Array.isArray(e)?e.forEach((e,i)=>{null!==e&&t(e)&&r.keys[i]&&(o[r.keys[i]]=e)}):"object"==typeof e?Object.keys(e).forEach(r=>{let i=e[r];null!=i&&t(i)&&(o[r]=i)}):o[r.keys[0]]=e),o}let p=a(j,k,x,g,v,C,w),m=r.forwardRef(function(e,a){var c;let m,f=l(),b=s(e),y=(0,d.extendSxProp)(b);c=f.breakpoints,m=[],void 0!==y.item&&(delete y.item,m.push("item")),void 0!==y.zeroMinWidth&&(delete y.zeroMinWidth,m.push("zeroMinWidth")),c.keys.forEach(e=>{void 0!==y[e]&&(m.push(e),delete y[e])});let{className:g,children:w,columns:j=12,container:x=!1,component:k="div",direction:v="row",wrap:C="wrap",size:E={},offset:T={},spacing:G=0,rowSpacing:$=G,columnSpacing:N=G,unstable_level:D=0,...A}=y,B=h(E,f.breakpoints,e=>!1!==e),z=h(T,f.breakpoints),_=e.columns??(D?void 0:j),I=e.spacing??(D?void 0:G),O=e.rowSpacing??e.spacing??(D?void 0:$),R=e.columnSpacing??e.spacing??(D?void 0:N),U={...y,level:D,columns:_,container:x,direction:v,wrap:C,spacing:I,rowSpacing:O,columnSpacing:R,size:B,offset:z},L=((e,r)=>{let t,{container:o,direction:a,spacing:s,wrap:l,size:c}=e,d={root:["root",o&&"container","wrap"!==l&&`wrap-xs-${String(l)}`,...void 0===a?[]:"object"==typeof a?Object.entries(a).map(([e,r])=>`direction-${e}-${r}`):[`direction-xs-${String(a)}`],...(t=[],Object.entries(c).forEach(([e,r])=>{!1!==r&&void 0!==r&&t.push(`grid-${e}-${String(r)}`)}),t),...o?((e,r="xs")=>{function t(e){return void 0!==e&&("string"==typeof e&&!Number.isNaN(Number(e))||"number"==typeof e&&e>0)}if(t(e))return[`spacing-${r}-${String(e)}`];if("object"==typeof e&&!Array.isArray(e)){let r=[];return Object.entries(e).forEach(([e,o])=>{t(o)&&r.push(`spacing-${e}-${String(o)}`)}),r}return[]})(s,r.breakpoints.keys[0]):[]]};return(0,n.default)(d,e=>(0,i.default)(u,e),{})})(U,f);return(0,S.jsx)(p,{ref:a,as:k,ownerState:U,className:(0,t.default)(L.root,g),...A,children:r.Children.map(w,e=>r.isValidElement(e)&&(0,o.default)(e,["Grid"])&&x&&e.props.container?r.cloneElement(e,{unstable_level:e.props?.unstable_level??D+1}):e)})});return m.muiName="Grid",m}({createStyledComponent:(0,$.styled)("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,r)=>{let{ownerState:t}=e;return[r.root,t.container&&r.container]}}),componentName:"MuiGrid",useThemeProps:e=>(0,N.useDefaultProps)({props:e,name:"MuiGrid"}),useTheme:D.default});e.s(["Grid",0,A],36057)},32963,e=>{"use strict";var r=e.i(67719);e.s(["Paper",()=>r.default])},83388,e=>{"use strict";var r=e.i(54624),t=e.i(43476);let o=(0,r.default)((0,t.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete");e.s(["default",0,o])},34450,e=>{"use strict";var r=e.i(82634);let t="http://localhost:8080/jobworks",o=async e=>{try{return(await r.default.get(`${t}`,{params:e})).data}catch(e){throw console.error("Error fetching jobworks:",e),e}},i=async e=>{try{return(await r.default.get(`${t}/jobwork-numbers/${e}`)).data}catch(e){throw console.error("Error fetching jobwork detail:",e),e}},n=async e=>{try{return(await r.default.post(`${t}`,e)).data}catch(e){throw console.error("Error creating jobwork:",e),e}},a=async()=>{try{return(await r.default.get(`${t}/jobwork-numbers/next-number`)).data}catch(e){throw console.error("Error fetching next jobwork number:",e),e}},s=async e=>{try{return(await r.default.post(`${t}/reassign/${e.jobworkNumber}`,e.employeeId)).data}catch(e){throw console.error("Error re assigning jobwork:",e),e}};e.s(["createJobwork",0,n,"fetchJobworkDetail",0,i,"fetchJobworks",0,o,"fetchNextJobworkNumber",0,a,"reAssignJobwork",0,s])},45385,60171,e=>{"use strict";e.i(47167);var r,t=e.i(82634),o=((r={}).CREATED="CREATED",r.CLOSED="CLOSED",r.ASSIGNED="ASSIGNED",r.DISCARDED="DISCARDED",r.COMPLETED="COMPLETED",r);e.s(["BatchStatus",()=>o,"BatchStatusColorMap",0,{CREATED:"info",ASSIGNED:"warning",CLOSED:"success",DISCARDED:"error",COMPLETED:"info"}],60171);let i="http://localhost:8080/batches",n=async e=>{try{return(await t.default.get(i,{params:e})).data}catch(e){throw console.error("Error fetching batches:",e),e}},a=async e=>{try{return(await t.default.post(i,e)).data}catch(e){throw console.error("Error creating batch:",e),e}},s=async()=>{try{return(await t.default.get(i,{params:{isUrgent:!0,batchStatusNames:[o.CREATED]}})).data}catch(e){throw console.error("Error getting unfinished urgent batches:",e),e}},l=async()=>{try{return(await t.default.get(`${i}/pending`)).data}catch(e){throw console.error("Error getting unfinished batchs:",e),e}},c=async e=>{try{let r=await t.default.get(`${i}/jobwork-types/${e}`);return console.log(r),r.data}catch(e){throw console.error("Error getting possible jobwork types:",e),e}},u=async e=>{try{return(await t.default.post(`${i}/recycle/${e}`)).data}catch(e){throw console.error("Error recycling batch:",e),e}};e.s(["createBatch",0,a,"fetchBatches",0,n,"getJobworkTypes",0,c,"getUnfinishedBatches",0,l,"getUnfinishedUrgentBatches",0,s,"recycleBatch",0,u],45385)},42205,e=>{"use strict";var r=e.i(43476),t=e.i(932),o=e.i(45385),i=e.i(36057),n=e.i(71645),a=e.i(67786),s=e.i(76552),l=e.i(34251),c=e.i(13995),u=e.i(30253),d=e.i(32963),h=e.i(69437),p=e.i(66796);let m={jobworkNumber:"",serialCode:"",jobworkType:"",assignedBy:void 0,employee:null,quantity:void 0,remarks:"",items:[]};function f(e){let o,n,a,s=(0,t.c)(8),{setJobwork:l,jobwork:c,maxQty:u}=e;s[0]===Symbol.for("react.memo_cache_sentinel")?(o=(0,r.jsx)(i.Grid,{}),s[0]=o):o=s[0];let d=c.quantity??"";s[1]!==u||s[2]!==l?(n=e=>{let r=e.target.value,t=""===r?void 0:Number(r);void 0!==t&&t>u&&(t=u),l(e=>({...e,quantity:t}))},s[1]=u,s[2]=l,s[3]=n):n=s[3];let p=`Available quantity ${u}`;return s[4]!==d||s[5]!==n||s[6]!==p?(a=(0,r.jsxs)(i.Grid,{children:[o,(0,r.jsx)(h.TextField,{id:"quantity",type:"number",label:"Quantity",fullWidth:!0,value:d,onChange:n,helperText:p})]}),s[4]=d,s[5]=n,s[6]=p,s[7]=a):a=s[7],a}var b=e.i(45542),y=e.i(36531),g=e.i(34450);e.i(47167);var w=e.i(82634);let j=async e=>{try{let r=await w.default.post("http://localhost:8080/generate-pdf/jobwork",e,{responseType:"blob"});return console.log(r.data),r.data}catch(e){throw console.error("Error fetching jobwork pdf:",e),e}};var x=e.i(69120),k=e.i(83388);function v(e){let o,n,s,c,u,d,p,m=(0,t.c)(23),{items:f,jobwork:b,setJobwork:y}=e;if(m[0]!==f||m[1]!==b.items||m[2]!==y){let e,t,l,d=b.items.map(T).filter(Boolean);m[8]!==y?(e=()=>{y(E)},m[8]=y,m[9]=e):e=m[9],n=e,m[10]!==y?(t=e=>{y(r=>({...r,items:r.items.filter((r,t)=>t!==e)}))},m[10]=y,m[11]=t):t=m[11];let p=t;m[12]!==y?(l=(e,r)=>{y(t=>{let o=[...t.items];return o[e]={...o[e],...r},{...t,items:o}})},m[12]=y,m[13]=l):l=m[13];let g=l;o=i.Grid,s=!0,c=2,u=b.items.map((e,t)=>{let o=f.filter(r=>!d.includes(r.id)||r.id===e.item?.id);return(0,r.jsxs)(i.Grid,{container:!0,size:12,spacing:2,children:[(0,r.jsx)(i.Grid,{size:5,children:(0,r.jsx)(a.Autocomplete,{fullWidth:!0,options:o,getOptionLabel:S,value:e.item,onChange:(e,r)=>g(t,{item:r}),renderInput:C})}),(0,r.jsx)(i.Grid,{size:5,children:(0,r.jsx)(h.TextField,{fullWidth:!0,type:"number",label:"Quantity",value:e.quantity??"",onChange:e=>g(t,{quantity:""===e.target.value?void 0:Number(e.target.value)})})}),(0,r.jsx)(i.Grid,{size:2,display:"flex",alignItems:"center",justifyContent:"center",children:(0,r.jsx)(x.IconButton,{onClick:()=>p(t),color:"error",children:(0,r.jsx)(k.default,{})})})]},t)}),m[0]=f,m[1]=b.items,m[2]=y,m[3]=o,m[4]=n,m[5]=s,m[6]=c,m[7]=u}else o=m[3],n=m[4],s=m[5],c=m[6],u=m[7];let g=b.items.length>=f.length;return m[14]!==n||m[15]!==g?(d=(0,r.jsx)(i.Grid,{size:12,children:(0,r.jsx)(l.Button,{variant:"outlined",onClick:n,disabled:g,children:"Add Item"})}),m[14]=n,m[15]=g,m[16]=d):d=m[16],m[17]!==o||m[18]!==s||m[19]!==c||m[20]!==u||m[21]!==d?(p=(0,r.jsxs)(o,{container:s,spacing:c,children:[u,d]}),m[17]=o,m[18]=s,m[19]=c,m[20]=u,m[21]=d,m[22]=p):p=m[22],p}function C(e){return(0,r.jsx)(h.TextField,{...e,label:"Item"})}function S(e){return e.name}function E(e){return{...e,items:[...e.items,{item:null,quantity:void 0}]}}function T(e){return e.item?.id}function G({pendingBatches:e,jobworkTypes:t,setJobwork:o,jobwork:w,employees:x,availableQty:k}){let[C,S]=(0,n.useState)(!1),[E,T]=(0,n.useState)(!1),[G,$]=(0,n.useState)(null),{user:N}=(0,b.useUser)(),{notify:D}=(0,y.useNotification)(),A=async()=>{try{G&&(URL.revokeObjectURL(G),$(null));let e={employeeName:w.employee?.name,employeeId:w.employee?.id,batchSerialCode:w.serialCode,assignedBy:N?.id,jobworkType:"CUTTING",quantities:[w.quantity],jobworkNumber:w.jobworkNumber,remarks:w.remarks},r=await j(e),t=URL.createObjectURL(r);$(t),T(!0)}catch(e){D("Failed to load PDF preview","error")}};return(0,n.useEffect)(()=>()=>{G&&URL.revokeObjectURL(G)},[G]),(0,r.jsxs)(d.Paper,{sx:{p:2,height:"100%"},elevation:2,children:[(0,r.jsx)(p.Typography,{fontWeight:600,children:"Assign Batch"}),(0,r.jsx)(c.Divider,{sx:{my:2}}),(0,r.jsxs)(i.Grid,{container:!0,spacing:2,children:[(0,r.jsx)(i.Grid,{size:12,children:(0,r.jsxs)(p.Typography,{children:["Jobwork Number : ",w.jobworkNumber]})}),(0,r.jsx)(i.Grid,{size:4,children:(0,r.jsx)(a.Autocomplete,{fullWidth:!0,options:e.map(e=>e.serialCode),value:w.serialCode,onChange:(e,r)=>o(e=>({...e,serialCode:r||""})),renderInput:e=>(0,r.jsx)(h.TextField,{...e,label:"Batch Serial Code"})})}),(0,r.jsx)(i.Grid,{size:4,children:(0,r.jsx)(a.Autocomplete,{fullWidth:!0,options:t,value:w.jobworkType,onChange:(e,r)=>o(e=>({...e,jobworkType:r||""})),renderInput:e=>(0,r.jsx)(h.TextField,{...e,label:"Jobwork Type"})})}),(0,r.jsx)(i.Grid,{size:4,children:(0,r.jsx)(a.Autocomplete,{fullWidth:!0,options:x,getOptionLabel:e=>e.name,value:w.employee,onChange:(e,r)=>o(e=>({...e,employee:r})),renderInput:e=>(0,r.jsx)(h.TextField,{...e,label:"Employee"})})}),"CUTTING"===w.jobworkType?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Grid,{size:12,children:(0,r.jsx)(f,{maxQty:k,jobwork:w,setJobwork:o})}),(0,r.jsx)(i.Grid,{size:12,children:(0,r.jsx)(h.TextField,{label:"Remarks",fullWidth:!0,multiline:!0,rows:3,value:w.remarks,onChange:e=>o(r=>({...r,remarks:e.target.value}))})})]}):w.jobworkType&&(0,r.jsx)(i.Grid,{size:12,children:(0,r.jsx)(v,{items:[{id:1,name:"apple"}],jobwork:w,setJobwork:o})}),(0,r.jsxs)(i.Grid,{size:12,display:"flex",justifyContent:"flex-end",gap:2,children:[(0,r.jsx)(l.Button,{variant:"contained",onClick:()=>{let e={employeeName:w.employee?.name,employeeId:w.employee?.id,batchSerialCode:w.serialCode,assignedBy:N?.id,jobworkType:"CUTTING",quantities:[w.quantity],jobworkNumber:w.jobworkNumber,remarks:w.remarks};S(!0),(0,g.createJobwork)(e).then(()=>{o(m),D("Jobwork created","success")}).catch(()=>D("Error creating jobwork","error")).finally(()=>S(!1))},disabled:C||!w.quantity||!w.employee||!w.jobworkType||!w.serialCode,children:"Assign"}),(0,r.jsx)(l.Button,{variant:"outlined",disabled:C||!w.quantity||!w.employee||!w.jobworkType||!w.serialCode,onClick:A,children:"Preview"})]})]}),(0,r.jsx)(u.Drawer,{anchor:"right",open:E,onClose:()=>T(!1),sx:{top:0,zIndex:e=>e.zIndex.drawer+1},PaperProps:{sx:{width:500}},children:(0,r.jsx)(s.Box,{sx:{p:1},children:G&&(0,r.jsx)("iframe",{src:G,width:"100%",height:"100%",style:{border:"none",minHeight:"90vh"}})})})]})}var $=e.i(64415);function N(){let e,a,s,l,c,u,d,h,p,f,b,y,w,j,x,k,v=(0,t.c)(26);v[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],v[0]=e):e=v[0];let[,C]=(0,n.useState)(e);v[1]===Symbol.for("react.memo_cache_sentinel")?(a=[],v[1]=a):a=v[1];let[S,E]=(0,n.useState)(a);v[2]===Symbol.for("react.memo_cache_sentinel")?(s=[],v[2]=s):s=v[2];let[T,N]=(0,n.useState)(s);v[3]===Symbol.for("react.memo_cache_sentinel")?(l=[],v[3]=l):l=v[3];let[B,z]=(0,n.useState)(l);v[4]===Symbol.for("react.memo_cache_sentinel")?(c={},v[4]=c):c=v[4],(0,n.useState)(c);let[_,I]=(0,n.useState)(m),[O,R]=(0,n.useState)();v[5]===Symbol.for("react.memo_cache_sentinel")?(u=()=>{(0,o.getUnfinishedUrgentBatches)().then(e=>{C(e.content)}),(0,o.getUnfinishedBatches)().then(e=>{E(e)}),(0,g.fetchNextJobworkNumber)().then(e=>I(r=>({...r,jobworkNumber:e})))},d=[],v[5]=u,v[6]=d):(u=v[5],d=v[6]),(0,n.useEffect)(u,d),v[7]!==_.serialCode?(h=()=>{console.log("changed",_.serialCode),_.serialCode&&""!==_.serialCode.trim()?(0,o.getJobworkTypes)(_.serialCode).then(e=>{N(e)}):(N([]),I(A)),(0,o.fetchBatches)({search:_.serialCode}).then(e=>{R(e.content[0].availableQuantity)})},p=[_.serialCode],v[7]=_.serialCode,v[8]=h,v[9]=p):(h=v[8],p=v[9]),(0,n.useEffect)(h,p),v[10]!==_.jobworkType||v[11]!==_.serialCode?(f=()=>{console.log(_.jobworkType),_.jobworkType&&""!==_.serialCode.trim()&&(0,$.fetchEmployees)().then(e=>{z(e)}).catch(D)},v[10]=_.jobworkType,v[11]=_.serialCode,v[12]=f):f=v[12],v[13]!==_.jobworkType?(b=[_.jobworkType],v[13]=_.jobworkType,v[14]=b):b=v[14],(0,n.useEffect)(f,b),v[15]===Symbol.for("react.memo_cache_sentinel")?(y={height:"calc(100vh - 130px)",overflow:"hidden"},v[15]=y):y=v[15],v[16]===Symbol.for("react.memo_cache_sentinel")?(w={minHeight:0},v[16]=w):w=v[16];let U=O??0;return v[17]!==B||v[18]!==_||v[19]!==T||v[20]!==S||v[21]!==U?(j=(0,r.jsx)(i.Grid,{container:!0,direction:"column",size:8,spacing:2,sx:w,children:(0,r.jsx)(i.Grid,{size:12,children:(0,r.jsx)(G,{pendingBatches:S,jobworkTypes:T,employees:B,setJobwork:I,jobwork:_,availableQty:U})})}),v[17]=B,v[18]=_,v[19]=T,v[20]=S,v[21]=U,v[22]=j):j=v[22],v[23]===Symbol.for("react.memo_cache_sentinel")?(x=(0,r.jsx)(i.Grid,{size:4,children:"gg"}),v[23]=x):x=v[23],v[24]!==j?(k=(0,r.jsxs)(i.Grid,{container:!0,sx:y,spacing:2,children:[j,x]}),v[24]=j,v[25]=k):k=v[25],k}function D(e){return console.log("error fetching emp")}function A(e){return{...e,jobworkType:""}}e.s(["default",()=>N],42205)}]);