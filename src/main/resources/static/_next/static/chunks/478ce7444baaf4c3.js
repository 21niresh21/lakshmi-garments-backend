(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,97555,e=>{"use strict";var t=e.i(45679);e.s(["Chip",()=>t.default])},91699,e=>{"use strict";var t=e.i(54624),r=e.i(43476);let a=(0,t.default)((0,r.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle");e.s(["default",0,a])},75576,e=>{"use strict";function t(e){return new Date(e).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}function r(e){return e?new Date(e).toLocaleString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}):"-"}e.s(["formatToShortDate",()=>t,"formatToShortDateTime",()=>r])},45385,60171,e=>{"use strict";e.i(47167);var t,r=e.i(82634),a=((t={}).CREATED="CREATED",t.CLOSED="CLOSED",t.ASSIGNED="ASSIGNED",t.DISCARDED="DISCARDED",t.COMPLETED="COMPLETED",t);e.s(["BatchStatus",()=>a,"BatchStatusColorMap",0,{CREATED:"info",ASSIGNED:"warning",CLOSED:"success",DISCARDED:"error",COMPLETED:"info"}],60171);let s="http://localhost:8080/batches",i=async e=>{try{return(await r.default.get(s,{params:e})).data}catch(e){throw console.error("Error fetching batches:",e),e}},c=async e=>{try{return(await r.default.post(s,e)).data}catch(e){throw console.error("Error creating batch:",e),e}},o=async()=>{try{return(await r.default.get(s,{params:{isUrgent:!0,batchStatusNames:[a.CREATED]}})).data}catch(e){throw console.error("Error getting unfinished urgent batches:",e),e}},l=async()=>{try{return(await r.default.get(`${s}/pending`)).data}catch(e){throw console.error("Error getting unfinished batchs:",e),e}},n=async e=>{try{let t=await r.default.get(`${s}/jobwork-types/${e}`);return console.log(t),t.data}catch(e){throw console.error("Error getting possible jobwork types:",e),e}},h=async e=>{try{return(await r.default.post(`${s}/recycle/${e}`)).data}catch(e){throw console.error("Error recycling batch:",e),e}};e.s(["createBatch",0,c,"fetchBatches",0,i,"getJobworkTypes",0,n,"getUnfinishedBatches",0,l,"getUnfinishedUrgentBatches",0,o,"recycleBatch",0,h],45385)},56e3,e=>{"use strict";var t=e.i(54624),r=e.i(43476);let a=(0,t.default)([(0,r.jsx)("circle",{cx:"12",cy:"19",r:"2"},"0"),(0,r.jsx)("path",{d:"M10 3h4v12h-4z"},"1")],"PriorityHigh");e.s(["default",0,a])},9525,e=>{"use strict";var t=e.i(43476),r=e.i(76322),a=e.i(36057),s=e.i(97555),i=e.i(69120),c=e.i(90884),c=c,o=e.i(46939),l=e.i(32963),n=e.i(66796),h=e.i(13995),d=e.i(63745),u=e.i(76552),g=e.i(88762),g=g,y=e.i(71645),S=e.i(45385),C=e.i(56e3),b=e.i(54624);let f=(0,b.default)((0,t.jsx)("path",{d:"M14 5h8v2h-8zm0 5.5h8v2h-8zm0 5.5h8v2h-8zM2 11.5C2 15.08 4.92 18 8.5 18H9v2l3-3-3-3v2h-.5C6.02 16 4 13.98 4 11.5S6.02 7 8.5 7H12V5H8.5C4.92 5 2 7.92 2 11.5"}),"LowPriority");var p=e.i(75576),E=e.i(18219);let m=(0,b.default)((0,t.jsx)("path",{d:"m23 12-2.44-2.78.34-3.68-3.61-.82-1.89-3.18L12 3 8.6 1.54 6.71 4.72l-3.61.81.34 3.68L1 12l2.44 2.78-.34 3.69 3.61.82 1.89 3.18L12 21l3.4 1.46 1.89-3.18 3.61-.82-.34-3.68zm-10 5h-2v-2h2zm0-4h-2V7h2z"}),"NewReleases");var x=e.i(60171);let D=(0,b.default)((0,t.jsx)("path",{d:"M5.77 7.15 7.2 4.78l1.03-1.71c.39-.65 1.33-.65 1.72 0l1.48 2.46-1.23 2.06-1 1.62zm15.95 5.82-1.6-2.66-3.46 2L18.87 16H20c.76 0 1.45-.43 1.79-1.11.14-.28.21-.58.21-.89 0-.36-.1-.71-.28-1.03M16 21h1.5c.76 0 1.45-.43 1.79-1.11L20.74 17H16v-2l-4 4 4 4zm-6-4H5.7l-.84 1.41c-.3.5-.32 1.12-.06 1.65.28.57.87.94 1.52.94H10zm-3.88-2.65 1.73 1.04L6.48 9.9 1 11.27l1.7 1.02-.41.69c-.35.59-.38 1.31-.07 1.92l1.63 3.26zm10.9-9.21-1.3-2.17C15.35 2.37 14.7 2 14 2h-3.53l3.12 5.2-1.72 1.03 5.49 1.37 1.37-5.49z"}),"Recycling");var j=e.i(91699);let v=(0,b.default)((0,t.jsx)("path",{d:"m19.93 8.21-3.6 1.68L14 7.7V6.3l2.33-2.19 3.6 1.68c.38.18.82.01 1-.36.18-.38.01-.82-.36-1L16.65 2.6c-.38-.18-.83-.1-1.13.2l-1.74 1.6c-.18-.24-.46-.4-.78-.4-.55 0-1 .45-1 1v1H8.82C8.34 4.65 6.98 3.73 5.4 4.07c-1.16.25-2.15 1.25-2.36 2.43-.22 1.32.46 2.47 1.48 3.08L7.08 18H4v3h13v-3h-3.62L8.41 8.77c.17-.24.31-.49.41-.77H12v1c0 .55.45 1 1 1 .32 0 .6-.16.78-.4l1.74 1.6c.3.3.75.38 1.13.2l3.92-1.83c.38-.18.54-.62.36-1-.18-.37-.62-.54-1-.36M6 8c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1"}),"PrecisionManufacturing"),w=(0,b.default)((0,t.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 13.5L7.5 11l1.42-1.41L12 12.67l3.08-3.08L16.5 11z"}),"ExpandCircleDown");var L=e.i(36531);let B={CREATED:m,ASSIGNED:v,CLOSED:j.default,DISCARDED:D,COMPLETED:m},A=[{id:"serialCode",label:"Serial Code",sortable:!0},{id:"categoryName",label:"Category"},{id:"batchStatus",label:"Status",render:e=>{let r=B[e.batchStatus];return(0,t.jsx)(s.Chip,{size:"small",icon:r?(0,t.jsx)(r,{color:x.BatchStatusColorMap[e.batchStatus]}):void 0,label:e.batchStatus})}},{id:"isUrgent",label:"Priority",render:e=>(0,t.jsx)(s.Chip,{size:"small",icon:e.isUrgent?(0,t.jsx)(C.default,{color:"error"}):(0,t.jsx)(f,{color:"primary"}),label:e.isUrgent?"HIGH":"NORMAL"})},{id:"remarks",label:"Remarks",render:e=>""===e.remarks?"No Remarks":e.remarks},{id:"createdAt",label:"Created At",sortable:!0,render:e=>(0,p.formatToShortDate)(e.createdAt)},{id:"createdBy",label:"Created By",render:e=>(0,t.jsx)(s.Chip,{size:"small",icon:(0,t.jsx)(E.default,{}),label:e.createdBy})}];function T(){let{notify:e}=(0,L.useNotification)(),[s,C]=(0,y.useState)(0),[b,f]=(0,y.useState)(5),[p,E]=(0,y.useState)(""),[m,j]=(0,y.useState)(),[v,B]=(0,y.useState)("desc"),[T,z]=(0,y.useState)(0),[R,P]=(0,y.useState)([]),[I,M]=(0,y.useState)(null),[N,k]=(0,y.useState)(null),[H,O]=(0,y.useState)([]),U=async t=>{if(t.batchStatus===x.BatchStatus.DISCARDED)return void e("Batch has already been discarded","warning");if(t.batchStatus===x.BatchStatus.CLOSED)return void e("Batch has already been packaged","warning");if(t.batchStatus===x.BatchStatus.ASSIGNED||t.batchStatus===x.BatchStatus.COMPLETED)return void e("Batch is in use","warning");try{M(t.id),await (0,S.recycleBatch)(t.id),e("Batch recycled. Inventory refilled","success"),G()}catch(t){e("Error recycling batch","error")}finally{M(null)}},G=async()=>{try{let e=await (0,S.fetchBatches)({pageNo:s,pageSize:b,sortBy:m,sortOrder:v,search:p});z(e.totalElements),P(e.content)}catch(e){console.error("Error loading batches:",e)}};return(0,y.useEffect)(()=>{G()},[s,b,p,m,v]),(0,t.jsxs)(a.Grid,{container:!0,children:[(0,t.jsx)(a.Grid,{size:12,children:(0,t.jsx)(r.default,{title:"Batches",rows:R,pagination:!0,totalCount:T,page:s,rowsPerPage:b,onPageChange:C,onRowsPerPageChange:f,searchPlacedHolder:"Search Serial Codes...",searchValue:p,onSearchChange:E,sortBy:m,sortOrder:v,onSortChange:(e,t)=>{j(e),B(t)},columns:A,rowActions:[{label:"Details",icon:e=>(0,t.jsx)(i.IconButton,{size:"small",children:(0,t.jsx)(w,{sx:{color:"gray"}})}),onClick:(e,t)=>{var r;return r=e.subCategories,void(k(t.currentTarget),O(r))}},{label:"Recycle",icon:e=>(0,t.jsx)(i.IconButton,{size:"small",disabled:I===e.id,children:I===e.id?(0,t.jsx)(g.default,{size:18}):(0,t.jsx)(D,{sx:{color:"gray"}})}),onClick:e=>U(e)}]})}),(0,t.jsx)(c.default,{open:!!N,anchorEl:N,placement:"right-start",sx:{zIndex:1300},children:(0,t.jsx)(o.ClickAwayListener,{onClickAway:()=>{k(null),O([])},children:(0,t.jsxs)(l.Paper,{elevation:4,sx:{p:2,minWidth:260},children:[(0,t.jsx)(n.Typography,{variant:"subtitle2",gutterBottom:!0,children:"Sub-Categories"}),(0,t.jsx)(h.Divider,{sx:{mb:1}}),0===H.length?(0,t.jsx)(n.Typography,{variant:"body2",color:"text.secondary",children:"No sub-categories"}):(0,t.jsx)(d.Stack,{spacing:1,children:H.map(e=>(0,t.jsxs)(u.Box,{display:"flex",justifyContent:"space-between",children:[(0,t.jsx)(n.Typography,{variant:"body2",children:e.subCategoryName}),(0,t.jsx)(n.Typography,{variant:"body2",fontWeight:600,children:e.quantity})]},e.id))})]})})})]})}e.s(["default",()=>T],9525)}]);