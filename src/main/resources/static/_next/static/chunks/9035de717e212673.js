(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,63742,e=>{"use strict";var t=e.i(43476),r=e.i(932),a=e.i(36057),o=e.i(69437),i=e.i(33460),l=e.i(25376),n=e.i(49017),s=e.i(76552),d=e.i(66796),u=e.i(16258),c=e.i(16335),p=e.i(20428),m=e.i(22315),f=e.i(74392),h=e.i(71645),y=e.i(29908),g=e.i(55116),b=e.i(36531),v=e.i(49430),x=e.i(5643);function C(e){let C,I,N,R,B,w,$,k,_,M,A,z,L,P,O,q,E,G,Y,W,F,V,H,U,K,Q,J,X,Z,ee,et,er,ea,eo,ei,el,en,es=(0,r.c)(103),{value:ed,errors:eu,onChange:ec,suppliers:ep,setSuppliers:em,transports:ef,setTransports:eh}=e,{notify:ey}=(0,b.useNotification)();es[0]===Symbol.for("react.memo_cache_sentinel")?(C={type:null,prefillName:""},es[0]=C):C=es[0];let[eg,eb]=(0,h.useState)(C);es[1]!==ey||es[2]!==ec||es[3]!==em?(I=async e=>{try{let t=await (0,g.addSupplier)(e);eb({type:null,prefillName:""}),em(e=>[...e,t]),ec({supplierID:t.id}),ey("Supplier created successfully","success")}catch(e){ey(e?.response?.data??"Error saving supplier","error")}},es[1]=ey,es[2]=ec,es[3]=em,es[4]=I):I=es[4];let ev=I;es[5]!==ey||es[6]!==ec||es[7]!==eh?(N=async e=>{try{let t=await (0,x.addTransport)(e);console.log("created t",t),eb({type:null,prefillName:""}),eh(e=>[...e,t]),ec({transportID:t.id}),ey("Transport created successfully","success")}catch(e){console.log(e),ey(e?.response?.data??"Error saving transport","error")}},es[5]=ey,es[6]=ec,es[7]=eh,es[8]=N):N=es[8];let ex=N;es[9]===Symbol.for("react.memo_cache_sentinel")?(R=(0,t.jsx)(d.Typography,{variant:"h5",sx:{mb:2},children:"Invoice Details"}),es[9]=R):R=es[9],es[10]!==ec?(B=e=>ec({invoiceNumber:e.target.value}),es[10]=ec,es[11]=B):B=es[11];let eC=!!eu.invoiceNumber;es[12]!==eu.invoiceNumber||es[13]!==B||es[14]!==eC||es[15]!==ed.invoiceNumber?(w=(0,t.jsx)(a.Grid,{size:4,children:(0,t.jsx)(o.TextField,{id:"invoice-number",fullWidth:!0,label:"Invoice Number",value:ed.invoiceNumber,onChange:B,error:eC,helperText:eu.invoiceNumber})}),es[12]=eu.invoiceNumber,es[13]=B,es[14]=eC,es[15]=ed.invoiceNumber,es[16]=w):w=es[16],es[17]!==ed.invoiceDate?($=ed.invoiceDate?(0,m.default)(ed.invoiceDate,"DD-MM-YYYY",!0):null,es[17]=ed.invoiceDate,es[18]=$):$=es[18],es[19]!==ec?(k=e=>ec({invoiceDate:e?e.format("DD-MM-YYYY"):""}),es[19]=ec,es[20]=k):k=es[20],es[21]===Symbol.for("react.memo_cache_sentinel")?(_=(0,m.default)(),es[21]=_):_=es[21];let eD=!!eu.invoiceDate;es[22]!==eu.invoiceDate||es[23]!==eD?(M={textField:{id:"invoice-date",fullWidth:!0,error:eD,helperText:eu.invoiceDate}},es[22]=eu.invoiceDate,es[23]=eD,es[24]=M):M=es[24],es[25]!==M||es[26]!==$||es[27]!==k?(A=(0,t.jsx)(a.Grid,{size:4,children:(0,t.jsx)(n.FormControl,{fullWidth:!0,children:(0,t.jsx)(u.DatePicker,{label:"Invoice Date",format:"DD/MM/YYYY",value:$,onAccept:k,maxDate:_,slotProps:M})})}),es[25]=M,es[26]=$,es[27]=k,es[28]=A):A=es[28],es[29]!==ed.receivedDate?(z=ed.receivedDate?(0,m.default)(ed.receivedDate,"DD-MM-YYYY",!0):null,es[29]=ed.receivedDate,es[30]=z):z=es[30],es[31]!==ec?(L=e=>ec({receivedDate:e?e.format("DD-MM-YYYY"):""}),es[31]=ec,es[32]=L):L=es[32],es[33]===Symbol.for("react.memo_cache_sentinel")?(P=(0,m.default)(),es[33]=P):P=es[33];let ej=!!eu.receivedDate;es[34]!==eu.receivedDate||es[35]!==ej?(O={textField:{id:"received-date",fullWidth:!0,error:ej,helperText:eu.receivedDate}},es[34]=eu.receivedDate,es[35]=ej,es[36]=O):O=es[36],es[37]!==z||es[38]!==L||es[39]!==O?(q=(0,t.jsx)(a.Grid,{size:4,children:(0,t.jsx)(n.FormControl,{fullWidth:!0,children:(0,t.jsx)(u.DatePicker,{label:"Received Date",format:"DD/MM/YYYY",value:z,onAccept:L,maxDate:P,slotProps:O})})}),es[37]=z,es[38]=L,es[39]=O,es[40]=q):q=es[40],es[41]!==ep||es[42]!==ed.supplierID?(E=ep.find(e=>e.id===ed.supplierID)||null,es[41]=ep,es[42]=ed.supplierID,es[43]=E):E=es[43],es[44]!==ec?(G=e=>ec({supplierID:e?.id}),es[44]=ec,es[45]=G):G=es[45],es[46]===Symbol.for("react.memo_cache_sentinel")?(Y=e=>{eb({type:"supplier",prefillName:e})},es[46]=Y):Y=es[46],es[47]!==eu.supplierID||es[48]!==ep||es[49]!==E||es[50]!==G?(W=(0,t.jsx)(f.GenericAutocomplete,{label:"Supplier",options:ep,value:E,onChange:G,allowCreate:!0,getOptionLabel:S,isOptionEqualToValue:T,onCreateClick:Y,error:eu.supplierID}),es[47]=eu.supplierID,es[48]=ep,es[49]=E,es[50]=G,es[51]=W):W=es[51];let eT="supplier"===eg.type;es[52]===Symbol.for("react.memo_cache_sentinel")?(F=()=>eb({type:null,prefillName:""}),es[52]=F):F=es[52],es[53]!==eg.prefillName?(V={name:eg.prefillName,location:""},es[53]=eg.prefillName,es[54]=V):V=es[54],es[55]!==ev||es[56]!==eT||es[57]!==V?(H=(0,t.jsx)(y.default,{open:eT,mode:"create",onSubmit:ev,onClose:F,initialData:V}),es[55]=ev,es[56]=eT,es[57]=V,es[58]=H):H=es[58],es[59]!==W||es[60]!==H?(U=(0,t.jsxs)(a.Grid,{size:4,children:[W,H]}),es[59]=W,es[60]=H,es[61]=U):U=es[61],es[62]!==ef||es[63]!==ed.transportID?(K=ef.find(e=>e.id===ed.transportID)||null,es[62]=ef,es[63]=ed.transportID,es[64]=K):K=es[64],es[65]!==ec?(Q=e=>ec({transportID:e?.id}),es[65]=ec,es[66]=Q):Q=es[66],es[67]===Symbol.for("react.memo_cache_sentinel")?(J=e=>{eb({type:"transport",prefillName:e})},es[67]=J):J=es[67],es[68]!==eu.transportID||es[69]!==K||es[70]!==Q||es[71]!==ef?(X=(0,t.jsx)(f.GenericAutocomplete,{label:"Transport",options:ef,value:K,onChange:Q,allowCreate:!0,getOptionLabel:j,isOptionEqualToValue:D,onCreateClick:J,error:eu.transportID}),es[68]=eu.transportID,es[69]=K,es[70]=Q,es[71]=ef,es[72]=X):X=es[72];let eS="transport"===eg.type;es[73]===Symbol.for("react.memo_cache_sentinel")?(Z=()=>eb({type:null,prefillName:""}),es[73]=Z):Z=es[73],es[74]!==eg.prefillName?(ee={name:eg.prefillName},es[74]=eg.prefillName,es[75]=ee):ee=es[75],es[76]!==ex||es[77]!==eS||es[78]!==ee?(et=(0,t.jsx)(v.default,{open:eS,mode:"create",onSubmit:ex,onClose:Z,initialData:ee}),es[76]=ex,es[77]=eS,es[78]=ee,es[79]=et):et=es[79],es[80]!==X||es[81]!==et?(er=(0,t.jsxs)(a.Grid,{size:4,children:[X,et]}),es[80]=X,es[81]=et,es[82]=er):er=es[82];let eI=ed.transportCost??"";es[83]!==ec?(ea=e=>{let t=e.target.value;ec({transportCost:""===t?void 0:Number(t)})},es[83]=ec,es[84]=ea):ea=es[84];let eN=!!eu.transportCost;return es[85]!==eu.transportCost||es[86]!==eI||es[87]!==ea||es[88]!==eN?(eo=(0,t.jsx)(a.Grid,{size:4,children:(0,t.jsx)(o.TextField,{id:"transport-cost",type:"number",label:"Transport Cost",fullWidth:!0,value:eI,onChange:ea,error:eN,helperText:eu.transportCost})}),es[85]=eu.transportCost,es[86]=eI,es[87]=ea,es[88]=eN,es[89]=eo):eo=es[89],es[90]!==ec?(ei=e=>ec({isTransportPaid:e.target.checked}),es[90]=ec,es[91]=ei):ei=es[91],es[92]!==ei||es[93]!==ed.isTransportPaid?(el=(0,t.jsx)(a.Grid,{children:(0,t.jsx)(l.FormControlLabel,{control:(0,t.jsx)(i.Switch,{checked:ed.isTransportPaid,onChange:ei}),label:"Transport Paid"})}),es[92]=ei,es[93]=ed.isTransportPaid,es[94]=el):el=es[94],es[95]!==A||es[96]!==q||es[97]!==U||es[98]!==er||es[99]!==eo||es[100]!==el||es[101]!==w?(en=(0,t.jsx)(c.LocalizationProvider,{dateAdapter:p.AdapterDayjs,children:(0,t.jsxs)(s.Box,{children:[R,(0,t.jsxs)(a.Grid,{container:!0,spacing:2,children:[w,A,q,U,er,eo,el]})]})}),es[95]=A,es[96]=q,es[97]=U,es[98]=er,es[99]=eo,es[100]=el,es[101]=w,es[102]=en):en=es[102],en}function D(e,t){return e.id===t.id}function j(e){return e.name}function T(e,t){return e.id===t.id}function S(e){return e.name}var I=e.i(34251),N=e.i(13995),R=e.i(63745),B=e.i(83388),w=e.i(54624);let $=(0,w.default)((0,t.jsx)("path",{d:"M21.99 8c0-.72-.37-1.35-.94-1.7L12 1 2.95 6.3C2.38 6.65 2 7.28 2 8v10c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2zM12 13 3.74 7.84 12 3l8.26 4.84z"}),"Drafts");e.i(47167);var k=e.i(7670),_=e.i(12678),M=e.i(19130),A=e.i(54033),z=e.i(42196),L=e.i(40799),P=e.i(75149),O=e.i(35057),q=e.i(94425),E=e.i(40672),G=e.i(19727);function Y(e){return(0,G.default)("MuiToggleButton",e)}let W=(0,E.default)("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge","fullWidth"]),F=h.createContext({}),V=h.createContext(void 0),H=(0,L.styled)(A.default,{name:"MuiToggleButton",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[`size${(0,z.default)(r.size)}`]]}})((0,P.default)(({theme:e})=>({...e.typography.button,borderRadius:(e.vars||e).shape.borderRadius,padding:11,border:`1px solid ${(e.vars||e).palette.divider}`,color:(e.vars||e).palette.action.active,[`&.${W.disabled}`]:{color:(e.vars||e).palette.action.disabled,border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[{props:{color:"standard"},style:{[`&.${W.selected}`]:{color:(e.vars||e).palette.text.primary,backgroundColor:e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.selectedOpacity),"&:hover":{backgroundColor:e.alpha((e.vars||e).palette.text.primary,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.selectedOpacity)}}}}},...Object.entries(e.palette).filter((0,O.default)()).map(([t])=>({props:{color:t},style:{[`&.${W.selected}`]:{color:(e.vars||e).palette[t].main,backgroundColor:e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.selectedOpacity),"&:hover":{backgroundColor:e.alpha((e.vars||e).palette[t].main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.selectedOpacity)}}}}})),{props:{fullWidth:!0},style:{width:"100%"}},{props:{size:"small"},style:{padding:7,fontSize:e.typography.pxToRem(13)}},{props:{size:"large"},style:{padding:15,fontSize:e.typography.pxToRem(15)}}]}))),U=h.forwardRef(function(e,r){var a;let{value:o,...i}=h.useContext(F),l=h.useContext(V),n=(0,_.default)({...i,selected:(a=e.value,void 0!==o&&void 0!==a&&(Array.isArray(o)?o.includes(a):a===o))},e),s=(0,q.useDefaultProps)({props:n,name:"MuiToggleButton"}),{children:d,className:u,color:c="standard",disabled:p=!1,disableFocusRipple:m=!1,fullWidth:f=!1,onChange:y,onClick:g,selected:b,size:v="medium",value:x,...C}=s,D={...s,color:c,disabled:p,disableFocusRipple:m,fullWidth:f,size:v},j=(e=>{let{classes:t,fullWidth:r,selected:a,disabled:o,size:i,color:l}=e,n={root:["root",a&&"selected",o&&"disabled",r&&"fullWidth",`size${(0,z.default)(i)}`,l]};return(0,M.default)(n,Y,t)})(D);return(0,t.jsx)(H,{className:(0,k.default)(i.className,j.root,u,l||""),disabled:p,focusRipple:!m,ref:r,onClick:e=>{g&&(g(e,x),e.defaultPrevented)||y&&y(e,x)},onChange:y,value:x,ownerState:D,"aria-pressed":b,...C,children:d})});function K(e){return(0,G.default)("MuiToggleButtonGroup",e)}let Q=(0,E.default)("MuiToggleButtonGroup",["root","selected","horizontal","vertical","disabled","grouped","groupedHorizontal","groupedVertical","fullWidth","firstButton","lastButton","middleButton"]),J=(0,L.styled)("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[{[`& .${Q.grouped}`]:t.grouped},{[`& .${Q.grouped}`]:t[`grouped${(0,z.default)(r.orientation)}`]},{[`& .${Q.firstButton}`]:t.firstButton},{[`& .${Q.lastButton}`]:t.lastButton},{[`& .${Q.middleButton}`]:t.middleButton},t.root,"vertical"===r.orientation&&t.vertical,r.fullWidth&&t.fullWidth]}})((0,P.default)(({theme:e})=>({display:"inline-flex",borderRadius:(e.vars||e).shape.borderRadius,variants:[{props:{orientation:"vertical"},style:{flexDirection:"column",[`& .${Q.grouped}`]:{[`&.${Q.selected} + .${Q.grouped}.${Q.selected}`]:{borderTop:0,marginTop:0}},[`& .${Q.firstButton},& .${Q.middleButton}`]:{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`& .${Q.lastButton},& .${Q.middleButton}`]:{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0},[`& .${Q.lastButton}.${W.disabled},& .${Q.middleButton}.${W.disabled}`]:{borderTop:"1px solid transparent"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{orientation:"horizontal"},style:{[`& .${Q.grouped}`]:{[`&.${Q.selected} + .${Q.grouped}.${Q.selected}`]:{borderLeft:0,marginLeft:0}},[`& .${Q.firstButton},& .${Q.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${Q.lastButton},& .${Q.middleButton}`]:{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0},[`& .${Q.lastButton}.${W.disabled},& .${Q.middleButton}.${W.disabled}`]:{borderLeft:"1px solid transparent"}}}]}))),X=h.forwardRef(function(e,r){let a=(0,q.useDefaultProps)({props:e,name:"MuiToggleButtonGroup"}),{children:o,className:i,color:l="standard",disabled:n=!1,exclusive:s=!1,fullWidth:d=!1,onChange:u,orientation:c="horizontal",size:p="medium",value:m,...f}=a,y={...a,disabled:n,fullWidth:d,orientation:c,size:p},g=(e=>{let{classes:t,orientation:r,fullWidth:a,disabled:o}=e,i={root:["root",r,a&&"fullWidth"],grouped:["grouped",`grouped${(0,z.default)(r)}`,o&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return(0,M.default)(i,K,t)})(y),b=h.useCallback((e,t)=>{let r;if(!u)return;let a=m&&m.indexOf(t);m&&a>=0?(r=m.slice()).splice(a,1):r=m?m.concat(t):[t],u(e,r)},[u,m]),v=h.useCallback((e,t)=>{u&&u(e,m===t?null:t)},[u,m]),x=h.useMemo(()=>({className:g.grouped,onChange:s?v:b,value:m,size:p,fullWidth:d,color:l,disabled:n}),[g.grouped,s,v,b,m,p,d,l,n]),C=h.Children.toArray(o).filter(e=>h.isValidElement(e)),D=C.length;return(0,t.jsx)(J,{role:"group",className:(0,k.default)(g.root,i),ref:r,ownerState:y,...f,children:(0,t.jsx)(F.Provider,{value:x,children:C.map((e,r)=>{let a,o;return(0,t.jsx)(V.Provider,{value:(a=0===r,o=r===D-1,a&&o?"":a?g.firstButton:o?g.lastButton:g.middleButton),children:e},r)})})})});var Z=e.i(6586),ee=e.i(52836),et=e.i(10557),er=e.i(95595),ea=e.i(1226),eo=e.i(19636),eo=eo,ei=e.i(48106);function el(e){return(0,G.default)("MuiCollapse",e)}(0,E.default)("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);let en=(0,L.styled)("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[r.orientation],"entered"===r.state&&t.entered,"exited"===r.state&&!r.in&&"0px"===r.collapsedSize&&t.hidden]}})((0,P.default)(({theme:e})=>({height:0,overflow:"hidden",transition:e.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:e.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:({ownerState:e})=>"exited"===e.state&&!e.in&&"0px"===e.collapsedSize,style:{visibility:"hidden"}}]}))),es=(0,L.styled)("div",{name:"MuiCollapse",slot:"Wrapper"})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),ed=(0,L.styled)("div",{name:"MuiCollapse",slot:"WrapperInner"})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),eu=h.forwardRef(function(e,r){let a=(0,q.useDefaultProps)({props:e,name:"MuiCollapse"}),{addEndListener:o,children:i,className:l,collapsedSize:n="0px",component:s,easing:d,in:u,onEnter:c,onEntered:p,onEntering:m,onExit:f,onExited:y,onExiting:g,orientation:b="vertical",slots:v={},slotProps:x={},style:C,timeout:D=er.duration.standard,TransitionComponent:j=Z.Transition,...T}=a,S={...a,orientation:b,collapsedSize:n},I=(e=>{let{orientation:t,classes:r}=e,a={root:["root",`${t}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${t}`],wrapperInner:["wrapperInner",`${t}`]};return(0,M.default)(a,el,r)})(S),N=(0,et.useTheme)(),R=(0,ee.default)(),B=h.useRef(null),w=h.useRef(),$="number"==typeof n?`${n}px`:n,_="horizontal"===b,A=_?"width":"height",z=h.useRef(null),L=(0,eo.default)(r,z),P=e=>t=>{if(e){let r=z.current;void 0===t?e(r):e(r,t)}},O=()=>B.current?B.current[_?"clientWidth":"clientHeight"]:0,E=P((e,t)=>{B.current&&_&&(B.current.style.position="absolute"),e.style[A]=$,c&&c(e,t)}),G=P((e,t)=>{let r=O();B.current&&_&&(B.current.style.position="");let{duration:a,easing:o}=(0,ea.getTransitionProps)({style:C,timeout:D,easing:d},{mode:"enter"});if("auto"===D){let t=N.transitions.getAutoHeightDuration(r);e.style.transitionDuration=`${t}ms`,w.current=t}else e.style.transitionDuration="string"==typeof a?a:`${a}ms`;e.style[A]=`${r}px`,e.style.transitionTimingFunction=o,m&&m(e,t)}),Y=P((e,t)=>{e.style[A]="auto",p&&p(e,t)}),W=P(e=>{e.style[A]=`${O()}px`,f&&f(e)}),F=P(y),V=P(e=>{let t=O(),{duration:r,easing:a}=(0,ea.getTransitionProps)({style:C,timeout:D,easing:d},{mode:"exit"});if("auto"===D){let r=N.transitions.getAutoHeightDuration(t);e.style.transitionDuration=`${r}ms`,w.current=r}else e.style.transitionDuration="string"==typeof r?r:`${r}ms`;e.style[A]=$,e.style.transitionTimingFunction=a,g&&g(e)}),H={slots:v,slotProps:x,component:s},[U,K]=(0,ei.default)("root",{ref:L,className:(0,k.default)(I.root,l),elementType:en,externalForwardedProps:H,ownerState:S,additionalProps:{style:{[_?"minWidth":"minHeight"]:$,...C}}}),[Q,J]=(0,ei.default)("wrapper",{ref:B,className:I.wrapper,elementType:es,externalForwardedProps:H,ownerState:S}),[X,eu]=(0,ei.default)("wrapperInner",{className:I.wrapperInner,elementType:ed,externalForwardedProps:H,ownerState:S});return(0,t.jsx)(j,{in:u,onEnter:E,onEntered:Y,onEntering:G,onExit:W,onExited:F,onExiting:V,addEndListener:e=>{"auto"===D&&R.start(w.current||0,e),o&&o(z.current,e)},nodeRef:z,timeout:"auto"===D?null:D,...T,children:(e,{ownerState:r,...a})=>{let o={...S,state:e};return(0,t.jsx)(U,{...K,className:(0,k.default)(K.className,{entered:I.entered,exited:!u&&"0px"===$&&I.hidden}[e]),ownerState:o,...a,children:(0,t.jsx)(Q,{...J,ownerState:o,children:(0,t.jsx)(X,{...eu,ownerState:o,children:i})})})}})});eu&&(eu.muiSupportAuto=!0);var ec=e.i(67719);let ep=h.createContext({});var em=e.i(88088);function ef(e){return(0,G.default)("MuiAccordion",e)}let eh=(0,E.default)("MuiAccordion",["root","heading","rounded","expanded","disabled","gutters","region"]),ey=(0,L.styled)(ec.default,{name:"MuiAccordion",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[{[`& .${eh.region}`]:t.region},t.root,!r.square&&t.rounded,!r.disableGutters&&t.gutters]}})((0,P.default)(({theme:e})=>{let t={duration:e.transitions.duration.shortest};return{position:"relative",transition:e.transitions.create(["margin"],t),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(e.vars||e).palette.divider,transition:e.transitions.create(["opacity","background-color"],t)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${eh.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${eh.disabled}`]:{backgroundColor:(e.vars||e).palette.action.disabledBackground}}}),(0,P.default)(({theme:e})=>({variants:[{props:e=>!e.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(e.vars||e).shape.borderRadius,borderBottomRightRadius:(e.vars||e).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:e=>!e.disableGutters,style:{[`&.${eh.expanded}`]:{margin:"16px 0"}}}]}))),eg=(0,L.styled)("h3",{name:"MuiAccordion",slot:"Heading"})({all:"unset"}),eb=(0,L.styled)("div",{name:"MuiAccordion",slot:"Region"})({}),ev=h.forwardRef(function(e,r){let a=(0,q.useDefaultProps)({props:e,name:"MuiAccordion"}),{children:o,className:i,defaultExpanded:l=!1,disabled:n=!1,disableGutters:s=!1,expanded:d,onChange:u,square:c=!1,slots:p={},slotProps:m={},TransitionComponent:f,TransitionProps:y,...g}=a,[b,v]=(0,em.default)({controlled:d,default:l,name:"Accordion",state:"expanded"}),x=h.useCallback(e=>{v(!b),u&&u(e,!b)},[b,u,v]),[C,...D]=h.Children.toArray(o),j=h.useMemo(()=>({expanded:b,disabled:n,disableGutters:s,toggle:x}),[b,n,s,x]),T={...a,square:c,disabled:n,disableGutters:s,expanded:b},S=(e=>{let{classes:t,square:r,expanded:a,disabled:o,disableGutters:i}=e;return(0,M.default)({root:["root",!r&&"rounded",a&&"expanded",o&&"disabled",!i&&"gutters"],heading:["heading"],region:["region"]},ef,t)})(T),I={slots:{transition:f,...p},slotProps:{transition:y,...m}},[N,R]=(0,ei.default)("root",{elementType:ey,externalForwardedProps:{...I,...g},className:(0,k.default)(S.root,i),shouldForwardComponentProp:!0,ownerState:T,ref:r,additionalProps:{square:c}}),[B,w]=(0,ei.default)("heading",{elementType:eg,externalForwardedProps:I,className:S.heading,ownerState:T}),[$,_]=(0,ei.default)("transition",{elementType:eu,externalForwardedProps:I,ownerState:T}),[A,z]=(0,ei.default)("region",{elementType:eb,externalForwardedProps:I,ownerState:T,className:S.region,additionalProps:{"aria-labelledby":C.props.id,id:C.props["aria-controls"],role:"region"}});return(0,t.jsxs)(N,{...R,children:[(0,t.jsx)(B,{...w,children:(0,t.jsx)(ep.Provider,{value:j,children:C})}),(0,t.jsx)($,{in:b,timeout:"auto",..._,children:(0,t.jsx)(A,{...z,children:D})})]})});function ex(e){return(0,G.default)("MuiAccordionDetails",e)}(0,E.default)("MuiAccordionDetails",["root"]);let eC=(0,L.styled)("div",{name:"MuiAccordionDetails",slot:"Root"})((0,P.default)(({theme:e})=>({padding:e.spacing(1,2,2)}))),eD=h.forwardRef(function(e,r){let a=(0,q.useDefaultProps)({props:e,name:"MuiAccordionDetails"}),{className:o,...i}=a,l=(e=>{let{classes:t}=e;return(0,M.default)({root:["root"]},ex,t)})(a);return(0,t.jsx)(eC,{className:(0,k.default)(l.root,o),ref:r,ownerState:a,...i})});function ej(e){return(0,G.default)("MuiAccordionSummary",e)}let eT=(0,E.default)("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),eS=(0,L.styled)(A.default,{name:"MuiAccordionSummary",slot:"Root"})((0,P.default)(({theme:e})=>{let t={duration:e.transitions.duration.shortest};return{display:"flex",width:"100%",minHeight:48,padding:e.spacing(0,2),transition:e.transitions.create(["min-height","background-color"],t),[`&.${eT.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${eT.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`&:hover:not(.${eT.disabled})`]:{cursor:"pointer"},variants:[{props:e=>!e.disableGutters,style:{[`&.${eT.expanded}`]:{minHeight:64}}}]}})),eI=(0,L.styled)("span",{name:"MuiAccordionSummary",slot:"Content"})((0,P.default)(({theme:e})=>({display:"flex",textAlign:"start",flexGrow:1,margin:"12px 0",variants:[{props:e=>!e.disableGutters,style:{transition:e.transitions.create(["margin"],{duration:e.transitions.duration.shortest}),[`&.${eT.expanded}`]:{margin:"20px 0"}}}]}))),eN=(0,L.styled)("span",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper"})((0,P.default)(({theme:e})=>({display:"flex",color:(e.vars||e).palette.action.active,transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),[`&.${eT.expanded}`]:{transform:"rotate(180deg)"}}))),eR=h.forwardRef(function(e,r){let a=(0,q.useDefaultProps)({props:e,name:"MuiAccordionSummary"}),{children:o,className:i,expandIcon:l,focusVisibleClassName:n,onClick:s,slots:d,slotProps:u,...c}=a,{disabled:p=!1,disableGutters:m,expanded:f,toggle:y}=h.useContext(ep),g={...a,expanded:f,disabled:p,disableGutters:m},b=(e=>{let{classes:t,expanded:r,disabled:a,disableGutters:o}=e;return(0,M.default)({root:["root",r&&"expanded",a&&"disabled",!o&&"gutters"],focusVisible:["focusVisible"],content:["content",r&&"expanded",!o&&"contentGutters"],expandIconWrapper:["expandIconWrapper",r&&"expanded"]},ej,t)})(g),v={slots:d,slotProps:u},[x,C]=(0,ei.default)("root",{ref:r,shouldForwardComponentProp:!0,className:(0,k.default)(b.root,i),elementType:eS,externalForwardedProps:{...v,...c},ownerState:g,additionalProps:{focusRipple:!1,disableRipple:!0,disabled:p,"aria-expanded":f,focusVisibleClassName:(0,k.default)(b.focusVisible,n)},getSlotProps:e=>({...e,onClick:t=>{e.onClick?.(t),y&&y(t),s&&s(t)}})}),[D,j]=(0,ei.default)("content",{className:b.content,elementType:eI,externalForwardedProps:v,ownerState:g}),[T,S]=(0,ei.default)("expandIconWrapper",{className:b.expandIconWrapper,elementType:eN,externalForwardedProps:v,ownerState:g});return(0,t.jsxs)(x,{...C,children:[(0,t.jsx)(D,{...j,children:o}),l&&(0,t.jsx)(T,{...S,children:l})]})});var eB=e.i(69120);let ew=(0,w.default)((0,t.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");var e$=e.i(87862),ek=e.i(26388),e_=e.i(44518),eM=e.i(95666),eA=e.i(12745);function ez(e){let a,i,l,n,s,d,u,c,p,m,y,g,v,x,C,D,j,T,S,I,N,w,$,k,_,M,A,z,L,P,O,q,E,G,Y,W,F,V=(0,r.c)(100),{bale:H,onChange:U,onDelete:K,categories:Q,subCategories:J,errors:X,setCategories:Z,setSubCategories:ee}=e,{notify:et}=(0,b.useNotification)();V[0]===Symbol.for("react.memo_cache_sentinel")?(a={type:null,prefillName:""},V[0]=a):a=V[0];let[er,ea]=(0,h.useState)(a);V[1]!==et||V[2]!==U||V[3]!==Z?(i=async e=>{try{let t=await (0,e_.addCategory)(e);ea({type:null,prefillName:""}),Z(e=>[...e,t]),U({categoryID:t.id}),et("Category created successfully","success")}catch(e){et(e?.response?.data??"Error saving category","error")}},V[1]=et,V[2]=U,V[3]=Z,V[4]=i):i=V[4];let eo=i;V[5]!==et||V[6]!==U||V[7]!==ee?(l=async e=>{try{let t=await (0,eA.addSubCategory)(e);ea({type:null,prefillName:""}),ee(e=>[...e,t]),U({subCategoryID:t.id}),et("Sub Category created successfully","success")}catch(e){et(e?.response?.data??"Error saving sub category","error")}},V[5]=et,V[6]=U,V[7]=ee,V[8]=l):l=V[8];let ei=l;V[9]!==U?(n=e=>U({baleNumber:e.target.value}),V[9]=U,V[10]=n):n=V[10];let el=!!X?.baleNumber,en=X?.baleNumber;V[11]===Symbol.for("react.memo_cache_sentinel")?(s={flex:3},V[11]=s):s=V[11],V[12]!==H.baleNumber||V[13]!==n||V[14]!==el||V[15]!==en?(d=(0,t.jsx)(o.TextField,{label:"Bale No",size:"small",value:H.baleNumber,onChange:n,error:el,helperText:en,sx:s}),V[12]=H.baleNumber,V[13]=n,V[14]=el,V[15]=en,V[16]=d):d=V[16];let es=H.price??"";V[17]!==U?(u=e=>{let t=e.target.value;U({price:""===t?void 0:Number(t)})},V[17]=U,V[18]=u):u=V[18];let ed=!!X?.price,eu=X?.price;V[19]===Symbol.for("react.memo_cache_sentinel")?(c={flex:2},V[19]=c):c=V[19],V[20]!==u||V[21]!==ed||V[22]!==eu||V[23]!==es?(p=(0,t.jsx)(o.TextField,{label:"Price",size:"small",type:"number",value:es,onChange:u,error:ed,helperText:eu,sx:c}),V[20]=u,V[21]=ed,V[22]=eu,V[23]=es,V[24]=p):p=V[24];let ec=H.quantity??"";V[25]!==U?(m=e=>{let t=e.target.value;U({quantity:""===t?void 0:Number(t)})},V[25]=U,V[26]=m):m=V[26];let ep=!!X?.quantity,em=X?.quantity;V[27]===Symbol.for("react.memo_cache_sentinel")?(y={flex:2},V[27]=y):y=V[27],V[28]!==ec||V[29]!==m||V[30]!==ep||V[31]!==em?(g=(0,t.jsx)(o.TextField,{label:"Quantity",size:"small",type:"number",value:ec,onChange:m,error:ep,helperText:em,sx:y}),V[28]=ec,V[29]=m,V[30]=ep,V[31]=em,V[32]=g):g=V[32];let ef=H.quality??"";V[33]!==U?(v=e=>U({quality:e.target.value}),V[33]=U,V[34]=v):v=V[34];let eh=!!X?.quality,ey=X?.quality;V[35]===Symbol.for("react.memo_cache_sentinel")?(x={flex:2},V[35]=x):x=V[35],V[36]!==ef||V[37]!==v||V[38]!==eh||V[39]!==ey?(C=(0,t.jsx)(o.TextField,{label:"Quality",size:"small",value:ef,onChange:v,error:eh,helperText:ey,sx:x}),V[36]=ef,V[37]=v,V[38]=eh,V[39]=ey,V[40]=C):C=V[40];let eg=H.length??"";V[41]!==U?(D=e=>{let t=e.target.value;U({length:""===t?void 0:Number(t)})},V[41]=U,V[42]=D):D=V[42];let eb=!!X?.length,ev=X?.length;V[43]===Symbol.for("react.memo_cache_sentinel")?(j={flex:2},V[43]=j):j=V[43],V[44]!==eg||V[45]!==D||V[46]!==eb||V[47]!==ev?(T=(0,t.jsx)(o.TextField,{label:"Length",size:"small",type:"number",value:eg,onChange:D,error:eb,helperText:ev,sx:j}),V[44]=eg,V[45]=D,V[46]=eb,V[47]=ev,V[48]=T):T=V[48],V[49]!==H.categoryID||V[50]!==Q?(S=Q.find(e=>e.id===H.categoryID)||null,V[49]=H.categoryID,V[50]=Q,V[51]=S):S=V[51],V[52]!==U?(I=e=>U({categoryID:e?.id}),V[52]=U,V[53]=I):I=V[53],V[54]===Symbol.for("react.memo_cache_sentinel")?(N=e=>{ea({type:"category",prefillName:e})},V[54]=N):N=V[54];let ex=X?.categoryID;V[55]===Symbol.for("react.memo_cache_sentinel")?(w={flex:3},V[55]=w):w=V[55],V[56]!==Q||V[57]!==S||V[58]!==I||V[59]!==ex?($=(0,t.jsx)(f.GenericAutocomplete,{size:"small",label:"Category",options:Q,value:S,onChange:I,allowCreate:!0,getOptionLabel:eq,isOptionEqualToValue:eO,onCreateClick:N,error:ex,sx:w}),V[56]=Q,V[57]=S,V[58]=I,V[59]=ex,V[60]=$):$=V[60];let eC="category"===er.type;V[61]===Symbol.for("react.memo_cache_sentinel")?(k=()=>ea({type:null,prefillName:""}),V[61]=k):k=V[61],V[62]!==er.prefillName?(_={name:er.prefillName,code:""},V[62]=er.prefillName,V[63]=_):_=V[63],V[64]!==eo||V[65]!==eC||V[66]!==_?(M=(0,t.jsx)(ek.default,{open:eC,mode:"create",onSubmit:eo,onClose:k,initialData:_}),V[64]=eo,V[65]=eC,V[66]=_,V[67]=M):M=V[67],V[68]!==H.subCategoryID||V[69]!==J?(A=J.find(e=>e.id===H.subCategoryID)||null,V[68]=H.subCategoryID,V[69]=J,V[70]=A):A=V[70],V[71]!==U?(z=e=>U({subCategoryID:e?.id}),V[71]=U,V[72]=z):z=V[72],V[73]===Symbol.for("react.memo_cache_sentinel")?(L=e=>{ea({type:"subCategory",prefillName:e})},P={flex:3},V[73]=L,V[74]=P):(L=V[73],P=V[74]),V[75]!==J||V[76]!==A||V[77]!==z?(O=(0,t.jsx)(f.GenericAutocomplete,{size:"small",label:"Sub Category",options:J,value:A,onChange:z,allowCreate:!0,getOptionLabel:eP,isOptionEqualToValue:eL,onCreateClick:L,sx:P}),V[75]=J,V[76]=A,V[77]=z,V[78]=O):O=V[78];let eD="subCategory"===er.type;return V[79]===Symbol.for("react.memo_cache_sentinel")?(q=()=>ea({type:null,prefillName:""}),V[79]=q):q=V[79],V[80]!==er.prefillName?(E={name:er.prefillName},V[80]=er.prefillName,V[81]=E):E=V[81],V[82]!==ei||V[83]!==eD||V[84]!==E?(G=(0,t.jsx)(eM.default,{open:eD,mode:"create",onSubmit:ei,onClose:q,initialData:E}),V[82]=ei,V[83]=eD,V[84]=E,V[85]=G):G=V[85],V[86]===Symbol.for("react.memo_cache_sentinel")?(Y=(0,t.jsx)(B.default,{}),V[86]=Y):Y=V[86],V[87]!==K?(W=(0,t.jsx)(eB.IconButton,{color:"error",onClick:K,children:Y}),V[87]=K,V[88]=W):W=V[88],V[89]!==p||V[90]!==g||V[91]!==C||V[92]!==T||V[93]!==$||V[94]!==M||V[95]!==O||V[96]!==G||V[97]!==W||V[98]!==d?(F=(0,t.jsxs)(R.Stack,{direction:"row",spacing:2,alignItems:"center",children:[d,p,g,C,T,$,M,O,G,W]}),V[89]=p,V[90]=g,V[91]=C,V[92]=T,V[93]=$,V[94]=M,V[95]=O,V[96]=G,V[97]=W,V[98]=d,V[99]=F):F=V[99],F}function eL(e,t){return e.id===t.id}function eP(e){return e.name}function eO(e,t){return e.id===t.id}function eq(e){return e.name}function eE(e){let a,o,i,l,n,u,c=(0,r.c)(38),{lorryReceipts:p,onChange:m,categories:f,subCategories:h,errors:y,onClearBaleError:g,setCategories:b,setSubCategories:v}=e;c[0]!==p||c[1]!==m?(a=e=>{m(p.filter(t=>t.id!==e))},c[0]=p,c[1]=m,c[2]=a):a=c[2];let x=a;c[3]!==p||c[4]!==m?(o=e=>{m(p.map(t=>t.id===e?{...t,bales:[...t.bales,{id:crypto.randomUUID(),baleNumber:""}]}:t))},c[3]=p,c[4]=m,c[5]=o):o=c[5];let C=o;c[6]!==p||c[7]!==m?(i=(e,t,r)=>{m(p.map(a=>a.id===e?{...a,bales:a.bales.map(e=>e.id===t?{...e,...r}:e)}:a))},c[6]=p,c[7]=m,c[8]=i):i=c[8];let D=i;c[9]!==p||c[10]!==m?(l=(e,t)=>{m(p.map(r=>r.id===e?{...r,bales:r.bales.filter(e=>e.id!==t)}:r))},c[9]=p,c[10]=m,c[11]=l):l=c[11];let j=l;if(0===p.length){let e;return c[12]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)(d.Typography,{color:"text.secondary",sx:{mt:1},children:"Add Lorry Receipts using the above button"}),c[12]=e):e=c[12],e}if(c[13]!==C||c[14]!==f||c[15]!==y||c[16]!==p||c[17]!==g||c[18]!==j||c[19]!==x||c[20]!==b||c[21]!==v||c[22]!==h||c[23]!==D){let e;c[25]!==C||c[26]!==f||c[27]!==y||c[28]!==g||c[29]!==j||c[30]!==x||c[31]!==b||c[32]!==v||c[33]!==h||c[34]!==D?(e=e=>(0,t.jsxs)(ev,{defaultExpanded:!0,sx:{mb:2},children:[(0,t.jsx)(eR,{expandIcon:(0,t.jsx)(ew,{}),component:"div",children:(0,t.jsxs)(R.Stack,{direction:"row",alignItems:"center",justifyContent:"space-between",width:"100%",children:[(0,t.jsxs)(R.Stack,{children:[(0,t.jsxs)(d.Typography,{fontWeight:600,children:["LR: ",e.lrNumber]}),(0,t.jsxs)(d.Typography,{variant:"caption",color:"text.secondary",children:[e.bales.length," bales"]})]}),(0,t.jsx)(eB.IconButton,{color:"error",size:"small",onClick:t=>{t.stopPropagation(),x(e.id)},children:(0,t.jsx)(B.default,{})})]})}),(0,t.jsx)(eD,{children:(0,t.jsxs)(R.Stack,{spacing:2,children:[e.bales.map(r=>(0,t.jsx)(s.Box,{width:"100%",children:(0,t.jsx)(ez,{setCategories:b,setSubCategories:v,bale:r,onChange:t=>{if(D(e.id,r.id,t),Object.keys(t).length&&g){let a=Object.keys(t)[0];g(e.id,r.id,a)}},onDelete:()=>j(e.id,r.id),categories:f,subCategories:h,errors:y[e.id]?.bales?.[r.id]})},r.id)),(0,t.jsx)(I.Button,{startIcon:(0,t.jsx)(e$.default,{}),onClick:()=>C(e.id),size:"small",children:"Add Bale"})]})})]},e.id),c[25]=C,c[26]=f,c[27]=y,c[28]=g,c[29]=j,c[30]=x,c[31]=b,c[32]=v,c[33]=h,c[34]=D,c[35]=e):e=c[35],n=p.map(e),c[13]=C,c[14]=f,c[15]=y,c[16]=p,c[17]=g,c[18]=j,c[19]=x,c[20]=b,c[21]=v,c[22]=h,c[23]=D,c[24]=n}else n=c[24];return c[36]!==n?(u=(0,t.jsx)(s.Box,{mt:2,children:n}),c[36]=n,c[37]=u):u=c[37],u}function eG(e){let i,l,n,u,c,p,m,f,y,g,b,v,x,C,D,j,T,S=(0,r.c)(44),{value:N,onChange:B,categories:w,subCategories:$,lrErrors:k,onClearBaleError:_,setCategories:M,setSubCategories:A}=e,[z,L]=(0,h.useState)(""),P=(0,h.useRef)(!1),O=(0,h.useRef)(null);S[0]!==N.transportType?(i=()=>{if(!P.current){P.current=!0;return}"self"===N.transportType?L(`SELF-${Date.now()}`):L("")},l=[N.transportType],S[0]=N.transportType,S[1]=i,S[2]=l):(i=S[1],l=S[2]),(0,h.useEffect)(i,l),S[3]!==B?(n=(e,t)=>{t&&(B({transportType:t}),"transport"===t&&L(""))},S[3]=B,S[4]=n):n=S[4];let q=n;S[5]!==z||S[6]!==B||S[7]!==N.lorryReceipts||S[8]!==N.transportType?(u=()=>{if(!z.trim())return;let e={id:crypto.randomUUID(),lrNumber:z,bales:[]};B({lorryReceipts:[...N.lorryReceipts,e]}),"self"===N.transportType?L(`SELF-${Date.now()}`):L("")},S[5]=z,S[6]=B,S[7]=N.lorryReceipts,S[8]=N.transportType,S[9]=u):u=S[9];let E=u;S[10]===Symbol.for("react.memo_cache_sentinel")?(c=(0,t.jsx)(d.Typography,{variant:"h5",sx:{mb:2,fontWeight:500},children:"Lorry Receipt & Bale Details"}),S[10]=c):c=S[10],S[11]===Symbol.for("react.memo_cache_sentinel")?(p=(0,t.jsx)(U,{value:"transport",children:"Transport"}),m=(0,t.jsx)(U,{value:"self",children:"Self"}),S[11]=p,S[12]=m):(p=S[11],m=S[12]),S[13]!==q||S[14]!==N.transportType?(f=(0,t.jsxs)(X,{color:"primary",value:N.transportType,onChange:q,exclusive:!0,children:[p,m]}),S[13]=q,S[14]=N.transportType,S[15]=f):f=S[15];let G="self"===N.transportType,Y="self"===N.transportType?"Auto-generated":"Enter LR number";S[16]===Symbol.for("react.memo_cache_sentinel")?(y=e=>{"Enter"===e.key&&(e.preventDefault(),O.current?.click())},g=e=>L(e.target.value),S[16]=y,S[17]=g):(y=S[16],g=S[17]),S[18]!==z||S[19]!==Y||S[20]!==G?(b=(0,t.jsx)(o.TextField,{id:"lr-number",label:"LR Number",value:z,disabled:G,placeholder:Y,onKeyDown:y,onChange:g}),S[18]=z,S[19]=Y,S[20]=G,S[21]=b):b=S[21],S[22]===Symbol.for("react.memo_cache_sentinel")?(v={height:35},S[22]=v):v=S[22];let W=!z;return S[23]!==E||S[24]!==W?(x=(0,t.jsx)(I.Button,{sx:v,onClick:E,disabled:W,size:"medium",variant:"contained",ref:O,children:"Add LR"}),S[23]=E,S[24]=W,S[25]=x):x=S[25],S[26]!==b||S[27]!==x||S[28]!==f?(C=(0,t.jsx)(a.Grid,{size:12,children:(0,t.jsxs)(R.Stack,{direction:"row",alignItems:"center",columnGap:3,children:[f,b,x]})}),S[26]=b,S[27]=x,S[28]=f,S[29]=C):C=S[29],S[30]!==B?(D=e=>B({lorryReceipts:e}),S[30]=B,S[31]=D):D=S[31],S[32]!==w||S[33]!==k||S[34]!==_||S[35]!==M||S[36]!==A||S[37]!==$||S[38]!==D||S[39]!==N.lorryReceipts?(j=(0,t.jsx)(a.Grid,{size:12,my:4,children:(0,t.jsx)(eE,{lorryReceipts:N.lorryReceipts,onChange:D,categories:w,subCategories:$,errors:k,onClearBaleError:_,setCategories:M,setSubCategories:A})}),S[32]=w,S[33]=k,S[34]=_,S[35]=M,S[36]=A,S[37]=$,S[38]=D,S[39]=N.lorryReceipts,S[40]=j):j=S[40],S[41]!==C||S[42]!==j?(T=(0,t.jsxs)(s.Box,{children:[c,(0,t.jsxs)(a.Grid,{container:!0,children:[C,j]})]}),S[41]=C,S[42]=j,S[43]=T):T=S[43],T}var eY=e.i(84337),eW=e.i(45542),eF=e.i(14463);e.s(["default",0,function(){let[e,r]=(0,h.useState)(eF.INITIAL_INVOICE),[o,i]=(0,h.useState)({}),[l,n]=(0,h.useState)(eF.INITIAL_LR),[d,u]=(0,h.useState)({}),[c,p]=(0,h.useState)(!1),[f,y]=(0,h.useState)([]),[v,D]=(0,h.useState)([]),[j,T]=(0,h.useState)([]),[S,w]=(0,h.useState)([]),{notify:k}=(0,b.useNotification)(),{user:_}=(0,eW.useUser)(),M=async()=>{var t;let a,o,s;if(a={},e.invoiceNumber||(a.invoiceNumber="Invoice number is required"),e.invoiceDate?(0,m.default)(e.invoiceDate,"DD-MM-YYYY",!0).isAfter((0,m.default)(),"day")&&(a.invoiceDate="Cannot select a future date"):a.invoiceDate="Invoice date is required",e.receivedDate?(0,m.default)(e.receivedDate,"DD-MM-YYYY",!0).isAfter((0,m.default)(),"day")&&(a.receivedDate="Cannot select a future date"):a.receivedDate="Received date is required",e.supplierID||(a.supplierID="Supplier is required"),e.transportID||(a.transportID="Transport is required"),e.transportCost&&e.transportCost<=0&&(a.transportCost="Transport cost cannot be negative"),console.log("errors",a),i(a),0!==Object.keys(a).length)return;let{errors:d,empty:c,valid:f}=(t=l.lorryReceipts,o={},s=[],0===t.length?(k("At least 1 Lorry Receipt should be present","error"),{errors:{},empty:[],valid:!1}):(t.forEach(e=>{let t={bales:{}};e.lrNumber||(t.lrNumber="LR number is required"),0===e.bales.length&&s.push(e.lrNumber),e.bales.forEach(e=>{let r={};e.baleNumber||(r.baleNumber="Bale number is required"),e.price||(r.price="Bale price is required"),e.price&&e.price<0&&(r.price="Price must be > 0"),e.quantity||(r.quantity="Bale quantity is required"),e.quality||(r.quality="Bale quality is required"),e.length||(r.length="Bale length is required"),e.length&&e.length<0&&(r.length="Length must be > 0"),e.subCategoryID||(r.subCategoryID="Sub Category is required"),e.categoryID||(r.categoryID="Category is required"),void 0!==e.quantity&&e.quantity<=0&&(r.quantity="Quantity must be > 0"),Object.keys(r).length>0&&(t.bales[e.id]=r)}),t.bales&&0===Object.keys(t.bales).length&&delete t.bales,(t.lrNumber||t.bales)&&(o[e.id]=t)}),{errors:o,empty:s,valid:!0}));if(u(d),f){if(c.length>0)return void k("Some of your lorry receipt has no bales. Please remove and submit again","error");if(0===Object.keys(d).length){p(!0);let t={...e,invoiceDate:e.invoiceDate.replaceAll("-","/"),receivedDate:e.receivedDate.replaceAll("-","/"),lorryReceipts:l.lorryReceipts,createdById:_?.id};try{await (0,eY.createStock)(t),k("Invoice has been saved","success"),r(eF.INITIAL_INVOICE),n(eF.INITIAL_LR),localStorage.removeItem("invoiceDraft")}catch{k("An error occured during submission","error")}finally{p(!1)}}}};return(0,h.useEffect)(()=>{let e=localStorage.getItem("invoiceDraft");if(e){k("Restored saved draft","info");try{let t=JSON.parse(e);t.invoice&&r(t.invoice),t.lr&&n(t.lr)}catch(e){console.error("Failed to parse draft",e)}}let t=async()=>{y(await (0,g.fetchSuppliers)())},a=async()=>{D(await (0,x.fetchTransports)())},o=async()=>{T(await (0,e_.fetchCategories)())},i=async()=>{w(await (0,eA.fetchSubCategories)())};try{t(),a(),o(),i()}catch{k("Error fetching data"),console.log("error fetch master data")}},[]),(0,t.jsx)(s.Box,{children:(0,t.jsxs)(a.Grid,{container:!0,children:[(0,t.jsx)(a.Grid,{size:12,children:(0,t.jsx)(C,{value:e,errors:o,onChange:e=>{r(t=>({...t,...e})),i(t=>{let r={...t};return Object.keys(e).forEach(e=>delete r[e]),r})},suppliers:f,transports:v,setSuppliers:y,setTransports:D})}),(0,t.jsx)(a.Grid,{size:12,children:(0,t.jsx)(N.Divider,{sx:{my:3}})}),(0,t.jsx)(a.Grid,{size:12,children:(0,t.jsx)(eG,{value:l,onChange:e=>{n(t=>({...t,...e})),console.log(e)},categories:j,subCategories:S,lrErrors:d,onClearBaleError:(e,t,r)=>{u(a=>{let o={...a},i=o[e]?.bales?.[t];return i?.[r]&&(delete i[r],0===Object.keys(i).length&&delete o[e].bales[t],o[e].bales&&0===Object.keys(o[e].bales).length&&delete o[e].bales,0===Object.keys(o[e]).length&&delete o[e]),o})},setCategories:T,setSubCategories:w})}),(0,t.jsx)(a.Grid,{size:12,children:(0,t.jsxs)(R.Stack,{justifyContent:"flex-end",direction:"row",columnGap:2,children:[(0,t.jsx)(I.Button,{variant:"outlined",onClick:()=>{r(eF.INITIAL_INVOICE),i({}),n(eF.INITIAL_LR),u({}),localStorage.removeItem("invoiceDraft")},startIcon:(0,t.jsx)(B.default,{}),color:"error",children:"Clear"}),(0,t.jsx)(I.Button,{variant:"contained",color:"secondary",startIcon:(0,t.jsx)($,{}),onClick:()=>{localStorage.setItem("invoiceDraft",JSON.stringify({invoice:e,lr:l})),k("Draft saved. Come back anytime to edit again!","success")},children:"Save Draft"}),(0,t.jsx)(I.Button,{variant:"contained",loading:c,loadingPosition:"start",onClick:M,children:"Submit Invoice"})]})})]})})}],63742)}]);